# MCP工具更新日志 - v3.0.0

> **更新日期**: 2025-11-10  
> **版本**: v3.0.0  
> **主要功能**: 群聊功能和上下文管理

---

## ✨ 新增功能

### 1. 群聊功能

#### 群组管理
- ✅ **create_group** - 创建项目群组
- ✅ **list_groups** - 列出所有群组
- ✅ **join_group** - 加入群组
- ✅ **leave_group** - 离开群组

#### 群组消息
- ✅ **send_group_message** - 在群组中发送消息
- ✅ **receive_group_messages** - 接收群组消息（支持多种过滤）
- ✅ **summarize_group_messages** - 生成群组消息摘要

### 2. 上下文管理增强

#### receive_messages 增强
- ✅ **时间过滤** (`since`) - 只返回指定时间之后的消息
- ✅ **关键词过滤** (`keywords`) - 只返回包含关键词的消息
- ✅ **内容长度限制** (`max_content_length`) - 限制单条消息长度
- ✅ **默认限制调整** - 从50条调整为20条

#### receive_group_messages
- ✅ **时间过滤** (`since`)
- ✅ **关键词过滤** (`keywords`)
- ✅ **话题过滤** (`topic`)
- ✅ **内容长度限制** (`max_content_length`)
- ✅ **默认限制** - 20条

### 3. 消息摘要功能

- ✅ **summarize_group_messages** - 生成群组消息摘要
  - 提取关键决策
  - 提取任务相关
  - 提取问题反馈
  - 提取完成情况
  - 支持时间范围过滤

---

## 🔧 技术改进

### 消息格式扩展

**新增字段**：
- `type`: "private" 或 "group"
- `group_id`: 群组ID（群组消息）
- `group_name`: 群组名称（群组消息）
- `topic`: 消息话题（可选）

### 数据存储

**新增文件**：
- `groups.json`: 群组信息存储

---

## 📋 使用示例

### 创建项目群组

```
create_group({
  "name": "知识库本地文件夹挂载项目",
  "description": "实现知识库本地文件夹挂载功能",
  "members": ["manager", "a", "b", "c", "d"]
})
```

### 在群组中讨论

```
send_group_message({
  "group_id": "GROUP_001",
  "message": "前端文件选择器已完成",
  "topic": "前端进展"
})
```

### 接收群组消息（控制上下文）

```
receive_group_messages({
  "group_id": "GROUP_001",
  "limit": 20,  # 只获取最近20条
  "unread_only": true,  # 只未读
  "keywords": ["API"],  # 只包含API的消息
  "max_content_length": 300  # 限制单条消息长度
})
```

### 生成消息摘要

```
summarize_group_messages({
  "group_id": "GROUP_001",
  "time_range": "last_7_days",
  "max_length": 500
})
```

---

## 🔄 向后兼容

- ✅ 私聊功能完全保留
- ✅ 现有消息格式兼容（未设置type的默认为private）
- ✅ 现有工具继续可用

---

## 📚 相关文档

- **群聊使用指南**: `mcp_ai_chat/GROUP_CHAT_GUIDE.md`
- **上下文管理方案**: `mcp_ai_chat/CONTEXT_MANAGEMENT_SOLUTION.md`
- **群聊设计文档**: `mcp_ai_chat/GROUP_CHAT_DESIGN.md`

---

**更新版本**: v3.0.0  
**更新日期**: 2025-11-10  
**维护者**: 产品经理






